
<div class="row">
	<div id="video-container" class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
		<!-- <iframe src="http://livestream.com/accounts/50006/events/3937639/player?width=560&height=315&autoPlay=true&mute=false" width="560" height="315" frameborder="0" scrolling="no"> </iframe> -->
		<iframe src="http://livestream.com/accounts/142499/events/3959775/player?width=560&height=315&autoPlay=true&mute=false" width="560" height="315" frameborder="0" scrolling="no"> </iframe>
	</div>
	<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 no-overflow">
		<div id="posts-container">
			
		</div>
	</div>
</div>

<script id="cardTemplate" type="text/template">
	<div class="panel panel-default">
		<div class="panel-heading">
		<b>{{name}}</b> - 4/11/2015
		</div>
		<div class="panel-body">
			{{message}}
		</div>
	</div>
</script>

<script id="cardTemplateWithImage" type="text/template">
	<div class="panel panel-default">
		<div class="panel-heading">
		<b>{{name}}</b> - 4/11/2015
		</div>
		<div class="panel-body">
			<div class="media">
				<div class="pull-left">
					<a href="#">
					  <img class="media-object cardImage" src="{{imageURI}}" alt="...">
					</a>
				</div>
				<div class="media-body">
					{{message}}
				</div>
			</div>
		</div>
	</div>
</script>

<script>
	var dateWeCareAbout = new Date().toUTCString();
	$(function() {
		setInterval(
			function () 
			{
				$.get( "/cards?after=" + dateWeCareAbout , function( cardDataArray ) {

				$.each(cardDataArray, function(i, cardData) {
					var template;
					if(!!cardData['imageURI']){
						template = $('#cardTemplateWithImage').html();
					} else {
						template = $('#cardTemplate').html();
					}
					var html = Mustache.to_html(template, cardData);
					var obj = $(jQuery.parseHTML(html));
					obj.hide().prependTo("#posts-container");
					$("#posts-container").children().fadeIn("slow");
			  		});
				});
			}, 3000);
	});

</script>


